# Simulation Results

This directory contains the output from Monte Carlo simulations studying the DML condition number $\kappa_{\mathrm{DML}}$.

## Data Files

| File | Description | Rows |
|------|-------------|------|
| `simulation_results_full.csv` | Full replication-level data | 4,500 (9 DGPs × 500 reps) |
| `simulation_summary.csv` | Aggregated summary statistics by DGP | 9 |

### `simulation_results_full.csv` Columns

| Column | Description |
|--------|-------------|
| `dgp_id` | DGP identifier (A1, A2, ..., C3) |
| `n` | Sample size (500 or 2000) |
| `rho` | Covariate correlation (0, 0.5, or 0.9) |
| `overlap` | Overlap level (high, moderate, low) |
| `sigma_U_sq` | Calibrated residual variance |
| `sample_r2` | Sample $R^2(D|X)$ |
| `replication` | Replication index (0–499) |
| `theta_hat` | DML point estimate |
| `se` | Standard error |
| `ci_lower`, `ci_upper` | 95% confidence interval bounds |
| `ci_length` | CI length |
| `kappa_dml` | Condition number |
| `coverage` | 1 if $\theta_0 \in$ CI, else 0 |
| `bias` | $\hat{\theta} - \theta_0$ |
| `squared_error` | $(\hat{\theta} - \theta_0)^2$ |

### `simulation_summary.csv` Columns

| Column | Description |
|--------|-------------|
| `dgp_id` | DGP identifier |
| `n`, `rho`, `overlap` | Design parameters |
| `mean_kappa` | Mean $\kappa_{\mathrm{DML}}$ across replications |
| `sd_kappa` | Standard deviation of $\kappa_{\mathrm{DML}}$ |
| `coverage_pct` | Coverage percentage (target: 95%) |
| `mean_ci_length` | Mean CI length |
| `mean_bias` | Mean bias |
| `rmse` | Root mean squared error |

## Figures

| File | Description |
|------|-------------|
| `coverage_vs_kappa.png/pdf` | **Main figure**: Empirical coverage vs. mean $\kappa_{\mathrm{DML}}$ |
| `ci_length_vs_kappa.png/pdf` | CI length vs. mean $\kappa_{\mathrm{DML}}$ |

## Reproducibility

These files were generated by `code/simulation_kappa_dml.ipynb` with:
- `N_REPS = 500` replications per DGP
- `K_FOLDS = 5` for cross-fitting
- `LEARNER = 'rf'` (Random Forest)
- `BASE_SEED = 2024`

To regenerate:
1. Open `code/simulation_kappa_dml.ipynb`
2. Set `RUN_NEW = True`
3. Run all cells
